{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst Base_URL = 'https://pixabay.com/api/';\nconst KEY_USER = '43953173-48a4f3f757f38a8504babc00c'\n\n\nexport const fetchFotoByQuery = async (query = \"happy\", page = 1, per_page = 15) => {\n    const searchParams = new URLSearchParams({\n        key: KEY_USER,\n        q: query,\n        per_page: per_page,\n        image_type: \"photo\",\n        page: page,\n        safesearch: true,\n        orientation: 'horizontal'\n    });\n    try {\n        const response = await axios.get(`${Base_URL}?${searchParams.toString()}`);\n        return response.data;\n    }\n    catch (error) {\n        throw new Error(`Error ${response.status}: ${response.statusText}`);\n    };\n}","export const createGalleryMarkUp = (images) => {\n    return images.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads}) => `\n        <div class=\"col\">\n          <div class=\"card shadow-sm\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\">\n              <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-img img-fluid\" />\n            </a>\n            <div class=\"card-body\">\n              <div class=\"d-flex justify-content-between align-items-center\">\n                \n                <small class=\"text-body-secondary\">Likes ${likes}</small>\n                <small class=\"text-body-secondary\">Views ${views}</small>\n                <small class=\"text-body-secondary\">Comments ${comments}</small>\n              </div>\n            </div>\n          </div>\n        </div>`\n    ).join('');\n};","// import iziToast from \"izitoast\";\n// import \"izitoast/dist/css/iziToast.min.css\";\n// import SimpleLightbox from \"simplelightbox\";\n// import \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n// import { fetchFotoByQuery } from \"./js/pixabay-api\";\n// import { createGalleryMarkUp } from \"./js/render-function\";\n\n// const galleryEl = document.querySelector('.js-gallery');\n// const searchFormEl = document.querySelector('.js-search-form');\n// const loaderEl = document.querySelector('.js-loader');\n// const loadMoreBtn = document.querySelector('.js-load-more');\n\n// let searchQuery = '';\n// let page = 1;\n// let totalPages = 0;\n// const perPage = 15;\n\n// const onSearchFormSubmit = async event => {\n//     event.preventDefault();\n//     const searchQuery = event.target.elements.searchKeyword.value.trim();\n//     if (searchQuery === \"\") {\n//         galleryEl.innerHTML = '';\n//         event.target.reset();\n//         iziToast.show({\n//             message: 'Input field cannot be empty',\n//             position: 'center',\n//             timeout: 2000,\n//             color: 'red',\n//         });\n//         return;\n//     }\n\n//     galleryEl.innerHTML = '';\n//     loaderEl.classList.remove('.is-');\n//     loadMoreBtn.classList.add('.d-none');\n\n//     try {\n//         const ImageData = await fetchFotoByQuery(searchQuery, page);\n//         totalPages = Math.ceil(ImageData.totalHits / perPage);\n//         createdImages(ImageData);\n//         if (totalPages > 1) {\n//             loadMoreBtn.classList.remove('.is-hidden');\n//         };\n//     } finally {\n//         loaderEl.classList.add('.is-hidden');\n//     };\n// };\n\n// const loadMoreImages = async () => {\n//     loaderEl.classList.remove('.is-hidden');\n//     try {\n//         const imagesData = await fetchFotoByQuery(searchQuery, page + 1);\n//         createdImages(imagesData, true);\n//         page += 1;\n//         if (page >= totalPages) {\n//             loadMoreBtn.classList.add('.is-hidden');\n//             iziToast.show({\n//                 message: 'You have reached the end result',\n//                 position: 'topRight',\n//                 timeout: 2000,\n//                 color: 'blue',\n//             });\n//         };\n//     } catch (error) {\n//         iziToast.show({\n//             message: 'Search params is not valid',\n//             position: 'topRight',\n//             timeout: 2000,\n//             color: 'red',\n//         });\n//     } finally {\n//         loaderEl.classList.add('.is-hidden');\n//     }\n// };\n\n// const createdImages = (imagesData, append = false) => {\n//     if (imagesData.hits.length === 0) {\n//         iziToast.show({\n//             message: \"Sorry, there are no images matching your search query. Please try again!\",\n//             position: 'center',\n//             timeout: 2000,\n//             color: 'red',\n//         });\n//         galleryEl.innerHTML = '';\n//         return;\n//     };\n\n//     const markup = createGalleryMarkUp(imagesData.hits);\n//     if (append) {\n//         galleryEl.insertAdjacentHTML('beforeend', markup);\n//     } else {\n//         galleryEl.innerHTML = markup;\n//     };\n//     const gallery = new SimpleLightbox('.card a');\n//     gallery.refresh();\n\n//  const smoothScrollOnLoadMore = () => {\n//     const lastArticle = galleryEl.querySelector('.card');\n//     const newsArticleHeight = lastArticle.getBoundingClientRect().height;\n//     const scrollHeight = newsArticleHeight * 2;\n//     console.log(scrollHeight);\n\n//     window.scrollBy({\n//         top: scrollHeight,\n//          left: 0,\n//         behavior: 'smooth',\n//     });\n//  };\n// };\n\n// searchFormEl.addEventListener('submit', onSearchFormSubmit)\n// loadMoreBtn.addEventListener('click', loadMoreImages);\n\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchFotoByQuery } from \"./js/pixabay-api\";\nimport { createGalleryMarkUp } from \"./js/render-function\";\n\nconst galleryEl = document.querySelector('.js-gallery');\nconst searchFormEl = document.querySelector('.js-search-form');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreBtn = document.querySelector('.js-load-more');\n\nlet searchQuery = '';\nlet page = 1;\nlet totalPages = 0;\nconst perPage = 15;\n\nconst onSearchFormSubmit = async event => {\n    event.preventDefault();\n    searchQuery = event.target.elements.searchKeyword.value.trim();\n    if (searchQuery === \"\") {\n        galleryEl.innerHTML = '';\n        event.target.reset();\n        iziToast.show({\n            message: 'Input field cannot be empty',\n            position: 'center',\n            timeout: 2000,\n            color: 'red',\n        });\n        return;\n    }\n\n    galleryEl.innerHTML = '';\n    loaderEl.classList.remove('is-hidden');\n    loadMoreBtn.classList.add('is-hidden');\n    page = 1;\n\n    try {\n        const imageData = await fetchFotoByQuery(searchQuery, page);\n        totalPages = Math.ceil(imageData.totalHits / perPage);\n        createdImages(imageData);\n        if (totalPages > 1) {\n            loadMoreBtn.classList.remove('is-hidden');\n        }\n    } catch (error) {\n        iziToast.show({\n            message: 'Search params are not valid',\n            position: 'center',\n            timeout: 2000,\n            color: 'red',\n        });\n    } finally {\n        loaderEl.classList.add('is-hidden');\n    }\n};\n\nconst loadMoreImages = async () => {\n    loaderEl.classList.remove('is-hidden');\n    try {\n        const imagesData = await fetchFotoByQuery(searchQuery, page + 1);\n        createdImages(imagesData, true);\n        page += 1;\n        if (page >= totalPages) {\n            loadMoreBtn.classList.add('is-hidden');\n            iziToast.show({\n                message: 'You have reached the end of the results',\n                position: 'center',\n                timeout: 2000,\n                color: 'blue',\n            });\n        }\n    } catch (error) {\n        console.error('Error fetching photos:', error);\n        iziToast.show({\n            message: 'Search params are not valid',\n            position: 'center',\n            timeout: 2000,\n            color: 'red',\n        });\n    } finally {\n        loaderEl.classList.add('is-hidden');\n    }\n};\n\nconst createdImages = (imagesData, append = false) => {\n    if (imagesData.hits.length === 0) {\n        iziToast.show({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: 'center',\n            timeout: 2000,\n            color: 'red',\n        });\n        galleryEl.innerHTML = '';\n        loadMoreBtn.classList.add('is-hidden');  // Hide load more button if no images found\n        return;\n    }\n\n    const markup = createGalleryMarkUp(imagesData.hits);\n    if (append) {\n        galleryEl.insertAdjacentHTML('beforeend', markup);\n    } else {\n        galleryEl.innerHTML = markup;\n    }\n\n    const gallery = new SimpleLightbox('.card a');\n    gallery.refresh();\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n"],"names":["Base_URL","KEY_USER","fetchFotoByQuery","query","page","per_page","searchParams","axios","createGalleryMarkUp","images","largeImageURL","webformatURL","tags","likes","views","comments","downloads","galleryEl","searchFormEl","loaderEl","loadMoreBtn","searchQuery","totalPages","perPage","onSearchFormSubmit","event","iziToast","imageData","createdImages","loadMoreImages","imagesData","error","append","markup","SimpleLightbox"],"mappings":"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"}